{% extends 'App_GameVerse/base.html' %}
<!-- ðŸ”¹ Extiende la plantilla base con navbar, footer y estilos -->

{% block content %}
<!-- ðŸ”¹ Bloque principal de contenido -->

<h2>Historial de compras</h2>
<!-- ðŸ”¹ TÃ­tulo de la secciÃ³n -->

<table class="table table-bordered mt-3">
<!-- ðŸ”¹ Tabla con borde y margen superior -->

    <thead>
        <tr>
            <th>ID</th>
            <th>Productos</th>
            <th>Total</th>
            <th>MÃ©todo de pago</th>
            <th>Estado</th>
            <th>Fecha</th>
        </tr>
    </thead>

    <tbody>
        {% for compra in compras %}
        <!-- ðŸ”¹ Itera sobre todas las compras del usuario -->
        <tr>
            <td>{{ compra.id }}</td>
            <!-- ðŸ”¹ Muestra el ID de la compra -->

            <!-- ðŸ”¥ Mostrar productos del JSON -->
            <td>
                <ul class="m-0 p-0" style="list-style: none;">
                <!-- ðŸ”¹ Lista sin estilos por defecto -->
                    {% for item in compra.detalles_productos %}
                        <!-- ðŸ”¹ Itera sobre los productos dentro de la compra -->
                        <li>
                            {{ item.nombre }} â€” ${{ item.precio }} x {{ item.cantidad }}
                            <!-- ðŸ”¹ Muestra nombre, precio y cantidad -->
                        </li>
                    {% empty %}
                        <li>No hay detalles.</li>
                        <!-- ðŸ”¹ Mensaje si no hay productos -->
                    {% endfor %}
                </ul>
            </td>

            <td>${{ compra.total }}</td>
            <!-- ðŸ”¹ Total de la compra -->

            <td>{{ compra.metodo_pago }}</td>
            <!-- ðŸ”¹ MÃ©todo de pago utilizado -->

            <td>{{ compra.estatus }}</td>
            <!-- ðŸ”¹ Estado de la compra (Completada, Pendiente, etc.) -->

            <td>{{ compra.fecha_compra }}</td>
            <!-- ðŸ”¹ Fecha en que se realizÃ³ la compra -->
        </tr>
        {% empty %}
        <!-- ðŸ”¹ Caso si no hay compras registradas -->
        <tr><td colspan="6">No hay compras registradas.</td></tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
<!-- ðŸ”¹ Fin del bloque de contenido -->
